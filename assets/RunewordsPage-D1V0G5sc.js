import{u as O,j as e,P as T,S as L}from"./index-CfWSKXDJ.js";import{r as o,u as B,L as F}from"./vendor-react-Y6pfRwed.js";import{c as h}from"./vendor-clsx-B-dksMZM.js";import{R as w}from"./data-runewords-DQoXqS6f.js";import{A as I}from"./AutocompleteSearch-DFx5HU0Z.js";import{a0 as N,y as M,S,_ as W,X as P,Y as D}from"./vendor-lucide-DAr9tT34.js";import"./data-items-BLKHMQdi.js";import"./data-sets-BBHdt6-a.js";const k="d2r_owned_runes";function $(){const{user:a}=O(),[n,i]=o.useState(!1),[r,m]=o.useState(()=>{try{const l=localStorage.getItem(k);return l?new Set(JSON.parse(l)):new Set}catch(l){return console.error("Failed to load Runes data",l),new Set}}),d=o.useRef(!1);return o.useEffect(()=>{try{localStorage.setItem(k,JSON.stringify(Array.from(r)))}catch(l){console.error("Failed to save Runes data",l)}},[r]),o.useEffect(()=>{if(!a){d.current=!1;return}const l=async()=>{i(!0);try{await new Promise(x=>setTimeout(x,1e3)),d.current=!0}catch(x){console.error("Cloud sync failed",x)}finally{i(!1)}};d.current||l()},[a,r]),{ownedRunes:r,toggleRune:l=>{m(x=>{const g=new Set(x);return g.has(l)?g.delete(l):g.add(l),g})},clearRunes:()=>m(new Set),isSyncing:n}}const K=[2,3,4,5,6],U=["Body Armor","Shield","Sword","Polearm","Helmet","Staff","Weapon","Axe","Mace","Claw","Bow","Crossbow","Scepter","Wand"],H=["El","Eld","Tir","Nef","Eth","Ith","Tal","Ral","Ort","Thul","Amn","Sol","Shael","Dol","Hel","Io","Lum","Ko","Fal","Lem","Pul","Um","Mal","Ist","Gul","Vex","Ohm","Lo","Sur","Ber","Jah","Cham","Zod"],R={S:0,A:1,B:2,C:3};function se(){const a=B(),[n,i]=o.useState(""),[r,m]=o.useState([]),[d,u]=o.useState(null),{ownedRunes:c,toggleRune:l,clearRunes:x,isSyncing:g}=$(),[b,C]=o.useState(!1),z=o.useMemo(()=>w.map(s=>({id:s.name.toLowerCase().replace(/[^a-z0-9]/g,"-"),label:s.name,category:`${s.sockets} sockets â€¢ ${s.runes.join(" + ")}`,icon:s.tier==="S"?"ðŸ†":s.tier==="A"?"â­":"ðŸ“œ"})),[]),_=s=>{a(`/runewords/${s.id}`)},A=s=>{m(t=>t.includes(s)?t.filter(p=>p!==s):[...t,s])},f=o.useMemo(()=>w.filter(t=>{const p=!n||t.name.toLowerCase().includes(n.toLowerCase())||t.runes.some(y=>y.toLowerCase().includes(n.toLowerCase())),v=r.length===0||r.includes(t.sockets),j=!d||t.bases.includes(d)||d==="Weapon"&&(t.bases.includes("Sword")||t.bases.includes("Axe")||t.bases.includes("Mace")||t.bases.includes("Polearm")||t.bases.includes("Scepter")||t.bases.includes("Staff")||t.bases.includes("Wand")||t.bases.includes("Melee Weapon")||t.bases.includes("Missile Weapon")||t.bases.includes("Claw")),E=c.size===0||t.runes.some(y=>c.has(y));return p&&v&&j&&E}).sort((t,p)=>{const v=R[t.tier]??99,j=R[p.tier]??99;return v-j}),[n,r,d,c]);return e.jsxs(T,{className:"pb-20",children:[e.jsx(L,{title:"Runeword Wizard",description:"Find the best Diablo 2 Resurrected runewords. Filter by runes, sockets, and item bases.",url:"/runewords"}),e.jsxs("div",{className:"relative mb-10 py-8 px-6 rounded-2xl overflow-hidden glass-heavy shadow-[0_0_40px_rgba(0,0,0,0.5)] border-d2-gold/20",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-900/20 via-transparent to-d2-gold/10 opacity-40"}),e.jsx("div",{className:"absolute -right-10 -bottom-20 text-[200px] opacity-5 select-none pointer-events-none text-d2-gold",children:e.jsx(N,{})}),e.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-end gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 rounded-lg bg-black/40 border border-d2-gold/30",children:e.jsx(N,{size:24,className:"text-d2-gold"})}),e.jsx("h1",{className:"text-4xl font-cinzel font-bold text-transparent bg-clip-text bg-gradient-to-r from-d2-gold to-white tracking-wide drop-shadow-sm",children:"Runeword Wizard"})]}),e.jsx("p",{className:"text-gray-400 font-serif italic max-w-xl",children:"Unlock the ancient language of creation. Combine runes to forge powerful artifacts."})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Knowledge Base"}),e.jsxs("div",{className:"bg-black/60 px-4 py-2 rounded-lg border border-white/10 flex items-center gap-2",children:[e.jsx("span",{className:"text-d2-gold font-bold text-xl",children:f.length}),e.jsx("span",{className:"text-xs uppercase tracking-wider text-gray-500 font-bold",children:"Matches Found"})]})]}),e.jsxs("button",{onClick:()=>C(!b),className:"md:hidden w-full flex items-center justify-center gap-2 py-3 glass-panel rounded text-d2-gold uppercase font-bold hover:shadow-lg transition-all border-d2-gold/30",children:[e.jsx(M,{size:16})," ",b?"Hide Filters":"Show Filters"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[300px_1fr] gap-8 items-start",children:[e.jsxs("div",{className:h("glass-heavy rounded-xl p-6 space-y-8 transition-all sticky top-24 border-white/5",b?"block":"hidden lg:block animate-in slide-in-from-left-4 duration-500"),children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"text-xs font-bold text-d2-gold uppercase tracking-wider flex items-center gap-2",children:[e.jsx(S,{size:12})," Search Name"]}),e.jsx(I,{options:z,placeholder:"e.g. Enigma",value:n,onChange:i,onSelect:_})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"text-xs font-bold text-d2-gold uppercase tracking-wider flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gray-500"})," Sockets"]}),e.jsx("div",{className:"flex gap-2",children:K.map(s=>e.jsxs("button",{onClick:()=>A(s),className:h("w-10 h-10 rounded-lg border font-bold transition-all flex items-center justify-center font-cinzel text-sm relative overflow-hidden group",r.includes(s)?"bg-d2-gold text-black border-d2-gold shadow-[0_0_15px_rgba(199,179,119,0.3)]":"bg-black/40 text-gray-500 border-white/10 hover:border-gray-500 hover:text-gray-300"),children:[e.jsx("span",{className:"relative z-10",children:s}),r.includes(s)&&e.jsx("div",{className:"absolute inset-0 bg-white/20 animate-pulse"})]},s))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"text-xs font-bold text-d2-gold uppercase tracking-wider flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gray-500"})," Item Type"]}),e.jsxs("div",{className:"relative group",children:[e.jsxs("select",{value:d||"",onChange:s=>u(s.target.value||null),className:"w-full appearance-none bg-black/40 border border-white/10 rounded-lg py-3 px-4 text-gray-300 focus:border-d2-gold focus:outline-none cursor-pointer transition-all hover:border-white/30 hover:bg-black/60",children:[e.jsx("option",{value:"",children:"Any Base Type"}),U.map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsx(W,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none group-hover:text-d2-gold transition-colors",size:16})]})]}),e.jsxs("div",{className:"space-y-4 pt-6 border-t border-white/10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-xs font-bold text-d2-gold uppercase tracking-wider",children:"My Stash"}),g&&e.jsx(N,{size:10,className:"animate-spin text-blue-400"})]}),c.size>0&&e.jsxs("button",{onClick:x,className:"text-[10px] text-red-500 hover:text-red-400 font-bold uppercase flex items-center gap-1 bg-red-900/10 px-2 py-1 rounded border border-red-900/30 hover:border-red-500/50 transition-colors",children:[e.jsx(P,{size:12})," Clear"]})]}),e.jsx("p",{className:"text-[10px] text-gray-500 mb-2",children:"Select runes to see what you can make."}),e.jsx("div",{className:"grid grid-cols-4 gap-2.5",children:H.map(s=>e.jsxs("button",{onClick:()=>l(s),title:s,className:h("h-8 rounded-md border text-[10px] font-bold uppercase transition-all flex items-center justify-center relative overflow-hidden",c.has(s)?"bg-gradient-to-b from-orange-900/60 to-black text-orange-400 border-orange-500/50 shadow-[0_0_10px_rgba(234,179,8,0.2)]":"bg-black/40 text-gray-600 border-white/5 hover:border-gray-500 hover:text-gray-400 hover:bg-white/5"),children:[s,c.has(s)&&e.jsx("div",{className:"absolute inset-0 bg-orange-500/10 animate-pulse pointer-events-none"})]},s))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 animate-in fade-in slide-in-from-bottom-8 duration-700 delay-100",children:[f.map((s,t)=>e.jsx(J,{runeword:s},t)),f.length===0&&e.jsxs("div",{className:"col-span-full py-24 text-center glass-heavy border-dashed rounded-xl flex flex-col items-center justify-center",children:[e.jsx(S,{size:48,className:"text-d2-gold/20 mb-4"}),e.jsx("h3",{className:"text-2xl font-cinzel font-bold text-gray-400 mb-2",children:"No Combinations Found"}),e.jsx("p",{className:"text-gray-500 max-w-sm mx-auto mb-6",children:"The runes remain silent. Adjust your filters or seek more powerful glyphs."}),(r.length>0||d||c.size>0||n)&&e.jsxs("button",{onClick:()=>{i(""),m([]),u(null),x()},className:"flex items-center gap-2 px-6 py-3 bg-d2-gold/10 border border-d2-gold/30 rounded-lg text-d2-gold hover:bg-d2-gold hover:text-black transition-all font-bold uppercase text-xs tracking-wider",children:[e.jsx(D,{size:16})," Reset All Filters"]})]})]})]})]})}function J({runeword:a}){const n=a.name.toLowerCase().replace(/[^a-z0-9]/g,"-");return e.jsxs(F,{to:`/runewords/${n}`,className:"group block glass-heavy rounded-xl p-0 overflow-hidden hover:border-d2-gold/50 transition-all hover:shadow-[0_10px_30px_rgba(0,0,0,0.5)] relative flex flex-col h-full hover:-translate-y-1 duration-300",children:[e.jsxs("div",{className:"p-6 relative z-10 flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6 border-b border-white/5 pb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:h("font-cinzel text-xl font-bold mb-1 group-hover:text-d2-gold transition-colors",a.tier==="S"?"text-d2-gold drop-shadow-sm":"text-gray-200"),children:a.name}),e.jsxs("div",{className:"text-xs text-uppercase tracking-wider text-gray-500 font-bold flex items-center gap-2",children:[e.jsxs("span",{className:"text-gray-400",children:[a.bases[0],a.bases.length>1?` +${a.bases.length-1}`:""]}),e.jsx("span",{className:"w-1 h-1 rounded-full bg-gray-600"}),e.jsxs("span",{className:"text-d2-gold/80",children:[a.sockets," Sockets"]})]})]}),e.jsxs("div",{className:"text-right flex flex-col items-end gap-1.5",children:[e.jsxs("div",{className:h("text-[10px] font-bold px-2 py-0.5 rounded border uppercase backdrop-blur-sm shadow-sm",a.tier==="S"?"bg-d2-gold/10 text-d2-gold border-d2-gold/30":a.tier==="A"?"bg-purple-900/20 text-purple-400 border-purple-500/30":"bg-gray-800/80 text-gray-500 border-gray-700"),children:["Tier ",a.tier]}),e.jsxs("div",{className:"text-[10px] text-gray-600 font-mono",children:["Lvl ",a.level,"REQ"]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:a.runes.map((i,r)=>e.jsxs("div",{className:"flex flex-col items-center gap-1.5 group/rune relative",children:[r<a.runes.length-1&&e.jsx("div",{className:"absolute top-1/2 -right-2 w-2 h-px bg-white/10 group-hover:bg-d2-gold/20 transition-colors"}),e.jsxs("div",{className:"w-10 h-10 flex items-center justify-center bg-black/60 border border-white/10 rounded-lg text-sm font-bold text-orange-400 group-hover/rune:border-orange-500/50 group-hover/rune:text-orange-300 transition-all shadow-lg group-hover/rune:shadow-orange-900/20 relative overflow-hidden",children:[i.substring(0,2),e.jsx("div",{className:"absolute inset-0 bg-orange-500/5 opacity-0 group-hover/rune:opacity-100 transition-opacity"})]}),e.jsx("span",{className:"text-[9px] uppercase text-gray-600 font-bold group-hover/rune:text-gray-400 tracking-wider",children:i})]},r))}),e.jsxs("div",{className:"space-y-2 mb-2 flex-grow bg-black/20 p-4 rounded-lg border border-white/5",children:[a.stats.slice(0,4).map((i,r)=>e.jsxs("div",{className:"text-sm text-gray-400 font-medium text-wrap flex items-start gap-2",children:[e.jsx("span",{className:"text-d2-gold/50 mt-1.5 w-1 h-1 rounded-full flex-shrink-0"}),i]},r)),a.stats.length>4&&e.jsxs("div",{className:"text-xs text-gray-600 italic pl-3 pt-1",children:["+",a.stats.length-4," more properties..."]})]})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-d2-gold/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none"})]})}export{se as RunewordsPage};
