import{u as R,c as D,j as e,P as O,S as P}from"./index-BTCiGgBL.js";import{r as j,L as f}from"./vendor-react-Y6pfRwed.js";import{c as l}from"./vendor-clsx-B-dksMZM.js";import{B as G}from"./data-builds-DhVhCnYS.js";import{G as _}from"./guides-C6jbQ03C.js";import{u as H}from"./useHolyGrail-BLO4L0q4.js";import{I as W}from"./data-items-BLKHMQdi.js";import{f as q,U as $,aH as J,w as V,d as z,aI as S,T as Y,A as L,B as K,t as X,aJ as d,aK as Q,L as Z,X as ee,S as se,aL as te}from"./vendor-lucide-DAr9tT34.js";import"./data-runewords-DQoXqS6f.js";import"./data-sets-BBHdt6-a.js";const ae=[...G.map(t=>({id:t.id,title:t.name,type:"Build",date:t.updated||"Recently",link:`/builds/${t.id}`})),..._.map(t=>({id:t.id,title:t.title,type:"Guide",date:t.updated||"Recently",link:`/guides/${t.id}`})),{id:"gambling-calc",title:"Gambling Odds Calculator",type:"Tool",date:"Always",link:"/tools/gambling"},{id:"dclone-tracker",title:"DClone Tracker",type:"Event",date:"Live",link:"/dclone"}];function he(){const{user:t,logout:M,updateProfile:n}=R(),{friends:x,messages:A,activeChatId:i,setActiveChatId:m,sendMessage:I,isChatOpen:g,toggleChat:h}=D(),[o,b]=j.useState("overview"),[p,v]=j.useState(""),B=s=>{s.preventDefault(),p.trim()&&(I(p),v(""))},y=j.useRef(null),T=s=>{const a=s.target.files?.[0];if(a){const r=new FileReader;r.onloadend=()=>{n({avatarUrl:r.result})},r.readAsDataURL(a)}},N=i?A[i]||[]:[],c=ae.filter(s=>t?.savedGuides?.includes(s.id)),E=[...x].sort((s,a)=>s.status==="online"&&a.status!=="online"?-1:s.status!=="online"&&a.status==="online"?1:0).slice(0,3),{totalFound:w}=H(),u=W.filter(s=>s.category==="unique"||s.category==="set").length,k=u>0?w/u*100:0;return e.jsxs(O,{className:"max-w-7xl mx-auto min-h-screen",children:[e.jsx(P,{title:"My Profile",description:"Your Sanctuary Dossier",url:"/profile"}),e.jsxs("div",{className:"relative mb-8 rounded-2xl overflow-hidden glass-heavy border-d2-gold/30 shadow-2xl",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black via-gray-900 to-d2-gold/10 opacity-90"}),e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10",children:e.jsx(q,{size:200})}),e.jsxs("div",{className:"relative z-10 p-8 flex flex-col md:flex-row items-center gap-8",children:[e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{className:"w-32 h-32 rounded-full border-4 border-d2-gold/50 bg-black/50 overflow-hidden shadow-[0_0_30px_rgba(199,179,119,0.3)] group-hover:border-d2-gold transition-colors relative",children:[e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-800 to-black text-gray-500",children:t?.avatarUrl?e.jsx("img",{src:t.avatarUrl,alt:t.username,className:"w-full h-full object-cover"}):e.jsx($,{size:48})}),e.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity cursor-pointer z-10",onClick:()=>y.current?.click(),title:"Change Avatar",children:[e.jsx(J,{size:24,className:"text-white"}),e.jsx("span",{className:"sr-only",children:"Change Avatar"})]}),e.jsx("input",{type:"file",ref:y,onChange:T,className:"hidden",accept:"image/*"})]}),e.jsx("div",{className:"absolute bottom-1 right-1 w-6 h-6 bg-green-500 rounded-full border-2 border-black z-20",title:"Online"})]}),e.jsxs("div",{className:"flex-1 text-center md:text-left space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-3",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-cinzel font-bold text-white",children:t?.username||"Nephalem Hero"}),t?.isElite&&e.jsx("span",{className:"px-2 py-0.5 rounded bg-d2-gold text-black text-[10px] font-bold uppercase tracking-widest border border-yellow-200 shadow-sm",children:"Elite"})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-start gap-4 text-sm text-gray-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(V,{size:14})," Joined ",t?.joinDate]}),e.jsx("span",{className:"w-1 h-1 bg-gray-600 rounded-full"}),e.jsxs("span",{className:"text-d2-gold",children:["Level ",t?.level," ",t?.characterClass," Main"]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>b("settings"),className:l("p-3 rounded-full hover:bg-white/10 text-gray-300 hover:text-white transition-colors border border-white/10",o==="settings"?"bg-d2-gold text-black border-d2-gold":"glass-panel"),title:"Settings",children:e.jsx(z,{size:20})}),e.jsx("button",{onClick:h,className:l("p-3 rounded-full transition-all shadow-lg border",g?"bg-d2-gold text-black border-white":"glass-panel text-d2-gold border-d2-gold/30 hover:bg-d2-gold/10"),title:"Toggle Chat",children:e.jsx(S,{size:20})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsxs(f,{to:"/holy-grail",className:"block glass-panel p-6 shadow-xl group hover:border-d2-gold/50 transition-all cursor-pointer",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4 border-b border-white/10 pb-2",children:[e.jsxs("h3",{className:"text-d2-gold font-cinzel font-bold flex items-center gap-2",children:[e.jsx(Y,{size:18})," Holy Grail"]}),e.jsx(L,{size:14,className:"rotate-180 text-gray-500 group-hover:text-d2-gold transition-colors"})]}),e.jsxs("div",{className:"flex items-center justify-center py-4 relative",children:[e.jsxs("svg",{className:"w-32 h-32 transform -rotate-90",children:[e.jsx("circle",{cx:"64",cy:"64",r:"56",stroke:"currentColor",strokeWidth:"8",fill:"transparent",className:"text-gray-800"}),e.jsx("circle",{cx:"64",cy:"64",r:"56",stroke:"currentColor",strokeWidth:"8",fill:"transparent",className:"text-d2-gold",strokeDasharray:351.86,strokeDashoffset:351.86*(1-k/100),strokeLinecap:"round"})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsxs("span",{className:"text-2xl font-bold text-white",children:[k.toFixed(0),"%"]}),e.jsx("span",{className:"text-[10px] text-gray-500 uppercase",children:"Found"})]})]}),e.jsxs("div",{className:"text-center text-xs text-gray-400 mt-2",children:[w," / ",u," Unique Items"]})]}),e.jsxs("div",{className:"glass-panel p-6 shadow-xl",children:[e.jsx("h3",{className:"text-gray-300 font-bold text-sm mb-4 uppercase tracking-widest border-b border-white/10 pb-2",children:"Top Classes"}),e.jsx("div",{className:"space-y-3",children:[{c:"Paladin",p:80},{c:"Sorceress",p:65},{c:"Amazon",p:30}].map((s,a)=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-400",children:[e.jsx("span",{children:s.c}),e.jsxs("span",{children:[s.p,"%"]})]}),e.jsx("div",{className:"h-1.5 bg-gray-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-600 rounded-full",style:{width:`${s.p}%`}})})]},a))})]})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx("div",{className:"flex gap-4 border-b border-white/10 pb-1",children:["Overview","Guides","Settings"].map(s=>e.jsxs("button",{onClick:()=>b(s.toLowerCase()),className:l("px-4 py-2 text-sm font-bold uppercase tracking-wider transition-colors relative",o===s.toLowerCase()?"text-d2-gold":"text-gray-500 hover:text-white"),children:[s,o===s.toLowerCase()&&e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-d2-gold shadow-[0_0_10px_rgba(199,179,119,0.5)]"})]},s))}),e.jsxs("div",{className:"glass-heavy p-6 rounded-xl min-h-[400px]",children:[o==="overview"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-xl font-cinzel font-bold text-white flex items-center gap-2",children:[e.jsx(K,{className:"text-d2-gold",size:20})," Messages Received"]}),e.jsx("div",{className:"grid gap-3",children:E.map(s=>e.jsxs("div",{onClick:()=>{m(s.id),g||h()},className:"group p-3 rounded-lg bg-black/40 border border-white/5 hover:border-d2-gold/30 hover:bg-white/5 transition-all flex items-center justify-between cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-800 border border-gray-600 overflow-hidden",children:s.avatar?e.jsx("img",{src:s.avatar,alt:s.name,className:"w-full h-full object-cover"}):s.name.substring(0,2)}),e.jsx("div",{className:l("absolute bottom-0 right-0 w-2.5 h-2.5 rounded-full border-2 border-black",s.status==="online"?"bg-green-500":s.status==="away"?"bg-yellow-500":"bg-gray-500")})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-200 group-hover:text-d2-gold transition-colors",children:s.name}),e.jsx("p",{className:"text-xs text-gray-500 truncate max-w-[200px]",children:s.lastMsg})]})]}),e.jsx(X,{size:16,className:"text-gray-600 group-hover:text-white"})]},s.id))})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-white/5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-xl font-cinzel font-bold text-white flex items-center gap-2",children:[e.jsx(d,{className:"text-d2-gold",size:20})," Saved Library"]}),e.jsx("button",{onClick:()=>b("guides"),className:"text-xs text-d2-gold hover:text-white transition-colors uppercase tracking-wider font-bold",children:"View All"})]}),e.jsx("div",{className:"space-y-3",children:c.length===0?e.jsx("div",{className:"text-gray-500 text-sm italic py-4 text-center",children:"No saved guides yet."}):c.slice(0,3).map((s,a)=>e.jsxs(f,{to:s.link,className:"group p-3 rounded-lg bg-black/40 border border-white/5 hover:border-d2-gold/30 hover:bg-white/5 transition-all flex justify-between items-center cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:l("w-8 h-8 rounded flex items-center justify-center border border-white/10",s.type==="Build"?"bg-red-900/20 text-red-400":s.type==="Farming"?"bg-green-900/20 text-green-400":s.type==="Boss"?"bg-purple-900/20 text-purple-400":s.type==="Item"?"bg-d2-gold/20 text-d2-gold":s.type==="Runeword"?"bg-orange-900/20 text-orange-400":"bg-blue-900/20 text-blue-400"),children:e.jsx(d,{size:14})}),e.jsx("div",{children:e.jsx("h4",{className:"font-bold text-sm text-gray-200 group-hover:text-d2-gold transition-colors",children:s.title})})]}),e.jsx("span",{className:"text-[10px] text-gray-500",children:s.date})]},a))})]})]}),o==="guides"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-xl font-cinzel font-bold text-white mb-6 flex items-center gap-2",children:[e.jsx(d,{className:"text-d2-gold"})," Full Library"]}),e.jsx("div",{className:"space-y-4",children:c.length===0?e.jsxs("div",{className:"text-gray-500 text-center py-12 glass-panel",children:[e.jsx(d,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Your library is empty. Bookmark guides to see them here."})]}):c.map((s,a)=>e.jsxs(f,{to:s.link,className:"group p-4 rounded-lg bg-black/40 border border-white/5 hover:border-d2-gold/30 hover:bg-white/5 transition-all flex justify-between items-center cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:l("w-10 h-10 rounded flex items-center justify-center border border-white/10",s.type==="Build"?"bg-red-900/20 text-red-400":s.type==="Farming"?"bg-green-900/20 text-green-400":s.type==="Boss"?"bg-purple-900/20 text-purple-400":s.type==="Item"?"bg-d2-gold/20 text-d2-gold":s.type==="Runeword"?"bg-orange-900/20 text-orange-400":"bg-blue-900/20 text-blue-400"),children:e.jsx(d,{size:18})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-200 group-hover:text-d2-gold transition-colors",children:s.title}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.type," â€¢ Saved ",s.date]})]})]}),e.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(Q,{size:16,className:"text-gray-500 hover:text-white"})})]},a))})]}),o==="settings"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("h3",{className:"text-xl font-cinzel font-bold text-white mb-6 flex items-center gap-2",children:[e.jsx(z,{className:"text-d2-gold"})," Account Settings"]}),e.jsxs("div",{className:"space-y-6 max-w-md",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-widest mb-2",children:"Display Name"}),e.jsx("input",{type:"text",value:t?.username,onChange:s=>n({username:s.target.value}),className:"w-full bg-black/50 border border-white/10 rounded px-4 py-2 text-white focus:border-d2-gold focus:outline-none transition-colors"}),e.jsx("p",{className:"text-[10px] text-gray-600 mt-1",children:"This name will be visible to your friends."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-widest mb-2",children:"Email Address"}),e.jsx("input",{type:"email",value:t?.email,disabled:!0,className:"w-full bg-black/50 border border-white/10 rounded px-4 py-2 text-gray-400 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-widest mb-2",children:"Notification Preferences"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t?.settings?.emailNotifications??!0,onChange:s=>n({settings:{...t?.settings,emailNotifications:s.target.checked}}),className:"rounded border-gray-600 bg-black/50 text-d2-gold focus:ring-d2-gold"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Email me about new guides"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t?.settings?.desktopNotifications??!1,onChange:s=>n({settings:{...t?.settings,desktopNotifications:s.target.checked}}),className:"rounded border-gray-600 bg-black/50 text-d2-gold focus:ring-d2-gold"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Enable desktop notifications"})]})]})]}),e.jsx("div",{className:"pt-6 border-t border-white/10",children:e.jsxs("button",{onClick:M,className:"flex items-center gap-2 px-4 py-2 bg-red-900/20 text-red-500 hover:bg-red-900/40 rounded transition-colors font-bold text-sm",children:[e.jsx(Z,{size:16})," Sign Out"]})})]})]})]})]}),e.jsxs("div",{className:l("fixed inset-y-0 right-0 w-80 bg-black/95 border-l border-d2-gold/30 transform transition-transform duration-300 z-50 flex flex-col shadow-2xl",g?"translate-x-0":"translate-x-full"),children:[e.jsxs("div",{className:"p-4 border-b border-white/10 bg-d2-dark flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[i&&e.jsx("button",{onClick:()=>m(null),className:"text-gray-500 hover:text-white transition-colors",title:"Back to Friends",children:e.jsx(L,{size:16})}),e.jsxs("h3",{className:"font-cinzel font-bold text-d2-gold flex items-center gap-2",children:[e.jsx(S,{size:16})," Sanctuary Messenger"]})]}),e.jsx("button",{onClick:h,className:"text-gray-500 hover:text-white",children:e.jsx(ee,{size:20})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:i?e.jsx("div",{className:"flex flex-col h-full",children:e.jsx("div",{className:"flex-1 space-y-3",children:N.map((s,a)=>{const r=s.senderId===0,C=x.find(F=>F.id===i),U=!r&&(a===0||N[a-1].senderId!==s.senderId);return e.jsxs("div",{className:l("flex items-end gap-2",r?"justify-end":"justify-start"),children:[!r&&e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-800 border-gray-600 overflow-hidden flex-shrink-0 mb-1",children:U?C?.avatar?e.jsx("img",{src:C.avatar,alt:"Sender",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-black"}):e.jsx("div",{className:"w-full h-full bg-transparent"})}),e.jsxs("div",{className:l("flex flex-col max-w-[70%]",r?"items-end":"items-start"),children:[e.jsxs("div",{className:l("p-3 rounded-2xl text-sm relative group shadow-sm",r?"bg-d2-gold/20 border border-d2-gold/30 text-d2-gold rounded-br-none":"bg-gray-800 border border-gray-700 text-gray-200 rounded-bl-none"),children:[s.text,r&&e.jsxs("div",{className:"absolute bottom-1 right-2 flex items-center space-x-[1px]",children:[e.jsx("svg",{className:l("w-3 h-3 transition-colors",s.status==="read"?"text-blue-400":"text-gray-500"),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),(s.status==="delivered"||s.status==="read")&&e.jsx("svg",{className:l("w-3 h-3 -ml-2 transition-colors",s.status==="read"?"text-blue-400":"text-gray-500"),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})]})]}),e.jsx("span",{className:"text-[10px] text-gray-600 mt-1 px-1",children:s.timestamp})]}),r&&e.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-d2-gold/30 overflow-hidden flex-shrink-0 mb-1",children:t?.avatarUrl?e.jsx("img",{src:t.avatarUrl,alt:"Me",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-black/50"})})]},a)})})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx(se,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:14}),e.jsx("input",{type:"text",placeholder:"Search friends...",className:"w-full bg-black/50 border border-white/10 rounded-full py-2 pl-9 pr-4 text-sm text-white focus:border-d2-gold/50 outline-none"})]}),e.jsx("div",{className:"space-y-1",children:x.map(s=>e.jsxs("div",{onClick:()=>m(s.id),className:"flex items-center gap-3 p-2 rounded-lg hover:bg-white/5 cursor-pointer group transition-colors",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-800 border border-gray-600 overflow-hidden",children:e.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs font-bold text-gray-400 bg-black",children:s.avatar?e.jsx("img",{src:s.avatar,alt:s.name,className:"w-full h-full object-cover"}):s.name.substring(0,2)})}),e.jsx("div",{className:l("absolute bottom-0 right-0 w-2.5 h-2.5 rounded-full border-2 border-black",s.status==="online"?"bg-green-500":s.status==="away"?"bg-yellow-500":"bg-gray-500")})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-baseline mb-0.5",children:[e.jsx("span",{className:"text-sm font-bold text-gray-200 group-hover:text-d2-gold truncate",children:s.name}),e.jsx("span",{className:"text-[10px] text-gray-600",children:"Now"})]}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:s.lastMsg})]})]},s.id))})]})}),i&&e.jsx("form",{onSubmit:B,className:"p-3 border-t border-white/10 bg-black/40",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:p,onChange:s=>v(s.target.value),placeholder:"Message...",className:"flex-1 bg-black/50 border border-white/10 rounded-full py-2 px-4 text-sm text-white focus:border-d2-gold/50 outline-none"}),e.jsx("button",{type:"submit",className:"p-2 rounded-full bg-d2-gold/20 text-d2-gold hover:bg-d2-gold hover:text-black transition-colors",children:e.jsx(te,{size:16})})]})})]})]})]})}export{he as UserProfilePage};
