import{j as r}from"./index-bmFt9tlZ.js";import{r as s}from"./vendor-react-Dw6BNO4u.js";import{c as b}from"./vendor-clsx-B-dksMZM.js";import{S as I,X as L}from"./vendor-lucide-C37mglnE.js";function V({options:p,placeholder:w="Search...",onSelect:h,onSearch:g,value:f,onChange:y,maxSuggestions:v=8,className:j}){const[k,C]=s.useState(""),[m,a]=s.useState(!1),[n,c]=s.useState(-1),i=s.useRef(null),u=s.useRef(null),l=f!==void 0?f:k,d=y||C,o=l.length>0?p.filter(e=>e.label.toLowerCase().includes(l.toLowerCase())||e.category&&e.category.toLowerCase().includes(l.toLowerCase())).slice(0,v):[],N=e=>{const t=e.target.value;d(t),a(!0),c(-1),g?.(t)},x=s.useCallback(e=>{d(e.label),a(!1),c(-1),h?.(e)},[d,h]),E=e=>{if(!m||o.length===0){e.key==="ArrowDown"&&l.length>0&&a(!0);return}switch(e.key){case"ArrowDown":e.preventDefault(),c(t=>t<o.length-1?t+1:0);break;case"ArrowUp":e.preventDefault(),c(t=>t>0?t-1:o.length-1);break;case"Enter":e.preventDefault(),n>=0&&x(o[n]);break;case"Escape":a(!1),c(-1);break}},D=()=>{d(""),a(!1),g?.(""),i.current?.focus()};return s.useEffect(()=>{const e=t=>{i.current&&!i.current.parentElement?.contains(t.target)&&a(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),s.useEffect(()=>{n>=0&&u.current&&u.current.children[n]?.scrollIntoView({block:"nearest"})},[n]),r.jsxs("div",{className:b("relative",j),children:[r.jsxs("div",{className:"relative",children:[r.jsx(I,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),r.jsx("input",{ref:i,type:"text",value:l,onChange:N,onKeyDown:E,onFocus:()=>l.length>0&&a(!0),placeholder:w,className:"w-full bg-d2-dark border border-d2-border/50 rounded-lg pl-10 pr-10 py-3 text-gray-200 placeholder-gray-500 focus:outline-none focus:border-d2-gold/50 transition-colors",autoComplete:"off"}),l&&r.jsx("button",{onClick:D,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-300 transition-colors",children:r.jsx(L,{className:"w-4 h-4"})})]}),m&&o.length>0&&r.jsx("ul",{ref:u,className:"absolute z-50 w-full mt-1 bg-d2-dark border border-d2-border/50 rounded-lg shadow-xl max-h-64 overflow-y-auto",children:o.map((e,t)=>r.jsxs("li",{onClick:()=>x(e),className:b("px-4 py-2.5 cursor-pointer transition-colors flex items-center gap-3",t===n?"bg-d2-gold/20 text-d2-gold":"text-gray-300 hover:bg-d2-border/30"),children:[e.icon&&r.jsx("span",{className:"text-lg shrink-0",children:e.icon}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"truncate font-medium",children:e.label}),e.category&&r.jsx("div",{className:"text-xs text-gray-500 truncate",children:e.category})]})]},e.id))})]})}export{V as A};
