import{r as s}from"./vendor-react-Y6pfRwed.js";const i=["Americas","Europe","Asia"],u=["Softcore","Hardcore"],f=["Ladder","Non-Ladder"];function g(){const[n,c]=s.useState([]);s.useEffect(()=>{const o=localStorage.getItem("d2r_dclone_status");if(o)try{c(JSON.parse(o));return}catch(t){console.error("Failed to parse DClone status",t)}const e=[];let a=1;i.forEach(t=>{f.forEach(r=>{u.forEach(d=>{e.push({id:String(a++),region:t,mode:d,ladder:r,stage:Math.floor(Math.random()*6)+1,lastUpdate:Date.now()-Math.floor(Math.random()*36e5)})})})}),c(e),localStorage.setItem("d2r_dclone_status",JSON.stringify(e))},[]),s.useEffect(()=>{n.length>0&&localStorage.setItem("d2r_dclone_status",JSON.stringify(n))},[n]),s.useEffect(()=>{const o=setInterval(()=>{c(e=>{if(e.length===0)return e;const a=[...e],t=Math.floor(Math.random()*a.length),r={...a[t]};return Math.random()>.9&&r.stage<6?r.stage+=1:r.stage===6&&Math.random()>.8&&(r.stage=1),r.lastUpdate=Date.now(),a[t]=r,a})},5e3);return()=>clearInterval(o)},[]);const l=s.useCallback((o,e)=>{c(a=>a.map(t=>t.id===o?{...t,stage:e,lastUpdate:Date.now()}:t))},[]);return{statuses:n,reportStatus:l}}export{g as u};
