import{u as ee,j as e,P as le,S as te}from"./index-BTCiGgBL.js";import{r as y,i as re}from"./vendor-react-Y6pfRwed.js";import{c as M}from"./vendor-clsx-B-dksMZM.js";import{g as ae,a as ie,C as Y,b as ne,S as de}from"./SkillTooltip-D8IHyLHS.js";import{I as J,g as oe,c as ce}from"./data-items-BLKHMQdi.js";import{O as xe,E as fe,P as Q,Q as Z,X as W,R as ue,V as me,Y as he,_ as ge,r as be,$ as pe,S as je,y as ve}from"./vendor-lucide-DAr9tT34.js";import{B as ye}from"./breakpoints-PW3Cdlw3.js";import{B as Ne}from"./data-builds-DhVhCnYS.js";import"./data-runewords-DQoXqS6f.js";import"./data-sets-BBHdt6-a.js";import"./Tooltip-CbPUyi2w.js";function we(){const{user:a,isLoading:s}=ee(),[r,l]=y.useState([]),t=m=>m?`d2r_builds_${m}`:"d2r_local_builds";y.useEffect(()=>{if(s)return;const m=t(a?.id),b=localStorage.getItem(m);if(b)try{const o=JSON.parse(b);Array.isArray(o)?l(o):l([])}catch(o){console.error("Failed to parse stored builds",o),l([])}else l([])},[a,s]);const u=m=>{const b=t(a?.id);try{localStorage.setItem(b,JSON.stringify(m))}catch(o){console.error("Failed to save builds to storage",o)}};return{builds:r,saveBuild:(m,b)=>{const o=Date.now();if(b)l(d=>{const g=d.map(p=>p.id===b?{...m,id:b,lastModified:o}:p);return u(g),g});else{const d={...m,id:`build-${o}-${Math.random().toString(36).substr(2,9)}`,lastModified:o};l(g=>{const p=[d,...g];return u(p),p})}},deleteBuild:m=>{confirm("Are you sure you want to delete this build?")&&l(b=>{const o=b.filter(d=>d.id!==m);return u(o),o})},isLoading:s}}function ke({charClass:a,level:s,skills:r,equipment:l,attributes:t,onLoad:u}){const{user:c}=ee(),{builds:x,saveBuild:m,deleteBuild:b}=we(),[o,d]=y.useState(!1),[g,p]=y.useState(!1),[v,L]=y.useState(!1),[F,O]=y.useState(""),[E,q]=y.useState(""),H=()=>{const f=new URLSearchParams;f.set("class",a),f.set("lvl",s.toString());const B=Object.entries(r).filter(([P,w])=>w>0).map(([P,w])=>`${P}:${w}`).join(",");B&&f.set("skills",B);const I=Object.entries(l).filter(([P,w])=>w).map(([P,w])=>`${P}:${w}`).join(",");I&&f.set("gear",I);const z=Object.entries(t).filter(([P,w])=>w>0).map(([P,w])=>`${P}:${w}`).join(",");return z&&f.set("attr",z),`${window.location.origin}${window.location.pathname}?${f.toString()}`},_=()=>{const f=H();navigator.clipboard.writeText(f),d(!0),setTimeout(()=>d(!1),2e3)},$=()=>{if(!F.trim()){q("Please enter a build name");return}m({name:F,charClass:a,level:s,skills:r,equipment:l,attributes:t}),p(!1),O(""),q("")},j=f=>{const B={};f.equipment&&Object.entries(f.equipment).forEach(([I,z])=>{z&&(B[I]=z)}),u({charClass:f.charClass,level:f.level,skills:f.skills,equipment:B,attributes:f.attributes}),L(!1)};return y.useEffect(()=>{const f=new URLSearchParams(window.location.search),B=f.get("class");if(B){const I=parseInt(f.get("lvl")||"1"),z={},P=f.get("skills");P&&P.split(",").forEach(i=>{const[n,h]=i.split(":");n&&h&&(z[n]=parseInt(h))});const w={},C=f.get("gear");C&&C.split(",").forEach(i=>{const[n,h]=i.split(":");n&&h&&J.some(S=>S.id===h)&&(w[n]=h)});const R={str:0,dex:0,vit:0,nrg:0},K=f.get("attr");K&&K.split(",").forEach(i=>{const[n,h]=i.split(":");n&&h&&n in R&&(R[n]=parseInt(h))}),u({charClass:B,level:I,skills:z,equipment:w,attributes:R}),window.history.replaceState({},"",window.location.pathname)}},[u]),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:_,className:"flex items-center gap-2 px-3 py-2 bg-d2-gold/10 border border-d2-gold/30 rounded hover:bg-d2-gold/20 transition-colors text-d2-gold font-cinzel text-sm",title:"Copy Link to Clipboard",children:[o?e.jsx(xe,{size:16}):e.jsx(fe,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:o?"Copied!":"Share"})]}),c?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>p(!0),className:"flex items-center gap-2 px-3 py-2 bg-blue-900/40 border border-blue-500/50 rounded hover:bg-blue-900/60 transition-colors text-blue-200 font-cinzel text-sm",children:[e.jsx(Q,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Save"})]}),e.jsxs("button",{onClick:()=>L(!0),className:"flex items-center gap-2 px-3 py-2 bg-d2-dark border border-d2-border rounded hover:border-d2-gold/50 transition-colors text-gray-300 font-cinzel text-sm relative",children:[e.jsx(Z,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"My Builds"}),x.length>0&&e.jsx("span",{className:"absolute -top-1 -right-1 flex w-4 h-4 items-center justify-center bg-d2-gold text-black text-[10px] font-bold rounded-full",children:x.length})]})]}):e.jsx("div",{className:"text-xs text-gray-500 italic px-2",children:"Log in to save builds"}),g&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",onClick:()=>p(!1),children:e.jsxs("div",{className:"glass-panel w-full max-w-md p-6 relative border-d2-gold/30",onClick:f=>f.stopPropagation(),children:[e.jsx("button",{onClick:()=>p(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-white",children:e.jsx(W,{size:20})}),e.jsxs("h3",{className:"font-cinzel font-bold text-xl text-d2-gold mb-4 flex items-center gap-2",children:[e.jsx(Q,{size:20})," Save Build"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs uppercase tracking-wider text-gray-400 mb-1",children:"Build Name"}),e.jsx("input",{type:"text",value:F,onChange:f=>O(f.target.value),placeholder:"e.g., Frozen Orb Sorc",className:"w-full bg-black/40 border border-d2-border rounded p-2 text-white outline-none focus:border-d2-gold/50",autoFocus:!0})]}),E&&e.jsxs("div",{className:"text-red-400 text-xs flex items-center gap-1",children:[e.jsx(ue,{size:12})," ",E]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[e.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 text-gray-400 hover:text-white text-sm",children:"Cancel"}),e.jsx("button",{onClick:$,className:"px-4 py-2 bg-d2-gold/20 text-d2-gold border border-d2-gold/50 rounded hover:bg-d2-gold/30",children:"Save"})]})]})]})}),v&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",onClick:()=>L(!1),children:e.jsxs("div",{className:"glass-panel w-full max-w-2xl max-h-[80vh] flex flex-col relative border-d2-gold/30",onClick:f=>f.stopPropagation(),children:[e.jsxs("div",{className:"p-4 border-b border-white/10 flex items-center justify-between bg-black/40",children:[e.jsxs("h3",{className:"font-cinzel font-bold text-xl text-d2-gold flex items-center gap-2",children:[e.jsx(Z,{size:20})," My Builds"]}),e.jsx("button",{onClick:()=>L(!1),className:"text-gray-500 hover:text-white",children:e.jsx(W,{size:20})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:x.length===0?e.jsxs("div",{className:"text-center py-10 text-gray-500",children:[e.jsx("p",{children:"No saved builds found."}),e.jsx("p",{className:"text-xs mt-2",children:'Create a build and click "Save" to see it here.'})]}):x.map(f=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-black/20 border border-white/5 rounded hover:border-d2-gold/30 group transition-all",children:[e.jsxs("div",{className:"cursor-pointer flex-1",onClick:()=>j(f),children:[e.jsx("div",{className:"font-bold text-d2-gold group-hover:text-white transition-colors",children:f.name}),e.jsxs("div",{className:"text-xs text-gray-500 flex gap-2",children:[e.jsxs("span",{children:[f.charClass," Lvl ",f.level]}),e.jsxs("span",{children:["â€¢ ",new Date(f.lastModified).toLocaleDateString()]})]})]}),e.jsx("button",{onClick:B=>{B.stopPropagation(),b(f.id)},className:"p-2 text-gray-600 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity",title:"Delete Build",children:e.jsx(me,{size:16})})]},f.id))})]})})]})}const Re={strength:0,dexterity:0,vitality:0,energy:0,life:0,mana:0,fireRes:0,coldRes:0,lightRes:0,poisonRes:0,maxFireRes:0,maxColdRes:0,maxLightRes:0,maxPoisonRes:0,fcr:0,fhr:0,ias:0,frw:0,mf:0,gf:0,dr:0,pdr:0,mdr:0,allSkills:0,classSkills:{},treeSkills:{},defense:0,cb:0,ds:0,ow:0,ll:0,ml:0,cbf:!1,replenishLife:0,maek:0,laek:0,absorbFire:0,absorbCold:0,absorbLight:0,absorbMagic:0};function Ce(a){const s={...Re,classSkills:{},treeSkills:{}};for(const r of a){if(!r)continue;r.defense&&(s.defense+=r.defense);const l=r.statLines||[];for(const t of l)Se(t,s);if(l.length===0&&r.stats){const t=r.stats;t.str&&(s.strength+=t.str),t.dex&&(s.dexterity+=t.dex),t.vit&&(s.vitality+=t.vit),t.ene&&(s.energy+=t.ene),t.life&&(s.life+=t.life),t.mana&&(s.mana+=t.mana),t.resAll&&(s.fireRes+=t.resAll,s.coldRes+=t.resAll,s.lightRes+=t.resAll,s.poisonRes+=t.resAll),t.fireRes&&(s.fireRes+=t.fireRes),t.coldRes&&(s.coldRes+=t.coldRes),t.lightRes&&(s.lightRes+=t.lightRes),t.poisonRes&&(s.poisonRes+=t.poisonRes),t.fcr&&(s.fcr+=t.fcr),t.fhr&&(s.fhr+=t.fhr),t.ias&&(s.ias+=t.ias),t.frw&&(s.frw+=t.frw),t.mf&&(s.mf+=t.mf),t.gf&&(s.gf+=t.gf),t.skills&&(s.allSkills+=t.skills),t.cb&&(s.cb+=t.cb),t.ds&&(s.ds+=t.ds),t.ow&&(s.ow+=t.ow),t.ll&&(s.ll+=t.ll),t.ml&&(s.ml+=t.ml),t.dr&&(s.dr+=t.dr),t.cbf&&(s.cbf=!0)}}return s}function Se(a,s){if(!a)return;const r=c=>{const x=a.match(c);return x?parseInt(x[1]):0};if(a.includes("To Strength")&&(s.strength+=r(/\+(\d+)(?:-\d+)? To Strength/)),a.includes("To Dexterity")&&(s.dexterity+=r(/\+(\d+)(?:-\d+)? To Dexterity/)),a.includes("To Vitality")&&(s.vitality+=r(/\+(\d+)(?:-\d+)? To Vitality/)),a.includes("To Energy")&&(s.energy+=r(/\+(\d+)(?:-\d+)? To Energy/)),a.includes("To All Attributes")){const c=r(/\+(\d+) To All Attributes/);s.strength+=c,s.dexterity+=c,s.vitality+=c,s.energy+=c}if(a.includes("To Life")&&!a.includes("Based On Character Level")&&!a.includes("After Each The Kill")&&(s.life+=r(/\+(\d+)(?:-\d+)? To Life/)),a.includes("To Mana")&&!a.includes("Based On Character Level")&&!a.includes("After Each Kill")&&(s.mana+=r(/\+(\d+)(?:-\d+)? To Mana/)),a.includes("To Mana After Each Kill")&&(s.maek+=r(/\+(\d+)(?:-\d+)? To Mana After Each Kill/)),a.includes("Life After Each Kill")&&(s.laek+=r(/\+(\d+)(?:-\d+)? To Life After Each Kill/)),a.includes("Replenish Life")&&(s.replenishLife+=r(/Replenish Life \+?(\d+)/)),a.includes("All Resistances")){const c=r(/All Resistances \+(\d+)/);s.fireRes+=c,s.coldRes+=c,s.lightRes+=c,s.poisonRes+=c}a.includes("Fire Resist")&&!a.includes("Maximum")&&(s.fireRes+=r(/Fire Resist \+?(\d+)%/)),a.includes("Cold Resist")&&!a.includes("Maximum")&&(s.coldRes+=r(/Cold Resist \+?(\d+)%/)),a.includes("Lightning Resist")&&!a.includes("Maximum")&&(s.lightRes+=r(/Lightning Resist \+?(\d+)%/)),a.includes("Poison Resist")&&!a.includes("Maximum")&&(s.poisonRes+=r(/Poison Resist \+?(\d+)%/)),a.includes("Maximum Fire Resist")&&(s.maxFireRes+=r(/To Maximum Fire Resist \+?(\d+)%/)),a.includes("Maximum Cold Resist")&&(s.maxColdRes+=r(/To Maximum Cold Resist \+?(\d+)%/)),a.includes("Maximum Lightning Resist")&&(s.maxLightRes+=r(/To Maximum Lightning Resist \+?(\d+)%/)),a.includes("Maximum Poison Resist")&&(s.maxPoisonRes+=r(/To Maximum Poison Resist \+?(\d+)%/)),a.includes("Maximum Fire Resist")&&s.maxFireRes===0&&(s.maxFireRes+=r(/\+(\d+)% To Maximum Fire Resist/)),a.includes("Fire Absorb")&&(s.absorbFire+=r(/(\d+) Fire Absorb/)),a.includes("Cold Absorb")&&(s.absorbCold+=r(/(\d+) Cold Absorb/)),a.includes("Lightning Absorb")&&(s.absorbLight+=r(/(\d+) Lightning Absorb/)),a.includes("Magic Absorb")&&(s.absorbMagic+=r(/(\d+) Magic Absorb/)),a.includes("Faster Cast Rate")&&(s.fcr+=r(/(\d+)% Faster Cast Rate/)),a.includes("Faster Hit Recovery")&&(s.fhr+=r(/(\d+)% Faster Hit Recovery/)),a.includes("Increased Attack Speed")&&(s.ias+=r(/(\d+)% Increased Attack Speed/)),a.includes("Faster Run/Walk")&&(s.frw+=r(/(\d+)% Faster Run\/Walk/)),a.includes("Damage Reduced By")&&a.includes("%")?s.dr+=r(/Damage Reduced By (\d+)%/):a.includes("Damage Reduced By")&&(s.pdr+=r(/Damage Reduced By (\d+)/)),a.includes("Magic Damage Reduced By")&&(s.mdr+=r(/Magic Damage Reduced By (\d+)/)),a.includes("Cannot Be Frozen")&&(s.cbf=!0),a.includes("Crushing Blow")&&(s.cb+=r(/(\d+)% Chance of Crushing Blow/)),a.includes("Deadly Strike")&&(s.ds+=r(/(\d+)% Deadly Strike/)),a.includes("Open Wounds")&&(s.ow+=r(/(\d+)% Chance of Open Wounds/)),a.includes("Life Stolen Per Hit")&&(s.ll+=r(/(\d+)(?:-\d+)?% Life Stolen Per Hit/)),a.includes("Mana Stolen Per Hit")&&(s.ml+=r(/(\d+)(?:-\d+)?% Mana Stolen Per Hit/)),a.includes("Getting Magic Items")&&(s.mf+=r(/(\d+)(?:-\d+)?% Better Chance/)),a.includes("Extra Gold From Monsters")&&(s.gf+=r(/(\d+)% Extra Gold/)),a.includes("To All Skills")&&(s.allSkills+=r(/\+(\d+) To All Skills/)),a.match(/\+(\d+) To (.*) Skills \((\w+) Only\)/);const l=a.match(/\+(\d+) To (Amazon|Assassin|Barbarian|Druid|Necromancer|Paladin|Sorceress) Skills/);if(l){const c=parseInt(l[1]),x=l[2];s.classSkills[x]=(s.classSkills[x]||0)+c}a.match(/\+(\d+) To (.*) Skills/)&&a.includes("All");const u=["Fire","Cold","Lightning","Poison And Bone","Curses","Summoning","Combat","Offensive Auras","Defensive Auras","Bow And Crossbow","Javelin And Spear","Passive And Magic","Martial Arts","Shadow Disciplines","Traps","Warcries","Combat Masteries","Elemental","Shape Shifting"];for(const c of u)if(a.includes(`To ${c} Skills`)){const x=r(new RegExp(`\\+(\\d+) To ${c} Skills`));s.treeSkills[c]=(s.treeSkills[c]||0)+x}}const Ae={Amazon:{lifePerVit:3,manaPerNrg:1.5,lifePerLevel:2,manaPerLevel:1.5},Assassin:{lifePerVit:3,manaPerNrg:1.75,lifePerLevel:2,manaPerLevel:1.5},Barbarian:{lifePerVit:4,manaPerNrg:1,lifePerLevel:2,manaPerLevel:1},Druid:{lifePerVit:2,manaPerNrg:2,lifePerLevel:1.5,manaPerLevel:2},Necromancer:{lifePerVit:2,manaPerNrg:2,lifePerLevel:1.5,manaPerLevel:2},Paladin:{lifePerVit:3,manaPerNrg:1.5,lifePerLevel:2,manaPerLevel:1.5},Sorceress:{lifePerVit:2,manaPerNrg:2,lifePerLevel:1,manaPerLevel:2}};function Le({charClass:a,level:s,baseStats:r,itemStats:l,allocatedStats:t,availablePoints:u,onAllocate:c}){const x=Ae[a],m=r.str+t.str+l.strength,b=r.dex+t.dex+l.dexterity,o=r.vit+t.vit+l.vitality,d=r.nrg+t.nrg+l.energy,g=(o-r.vit)*x.lifePerVit,p=(s-1)*x.lifePerLevel,v=r.life+p+g+l.life,L=(d-r.nrg)*x.manaPerNrg,F=(s-1)*x.manaPerLevel,O=r.mana+F+L+l.mana,E=-100,q=E+l.fireRes,H=E+l.coldRes,_=E+l.lightRes,$=E+l.poisonRes;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"glass-panel rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-cinzel text-d2-gold",children:"Attributes"}),e.jsxs("span",{className:"text-xs text-d2-gold font-bold",children:["Points: ",u]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(V,{label:"Strength",value:m,bonus:l.strength,allocated:t.str,color:"text-red-400",canAdd:u>0,onAdd:j=>c("str",j.shiftKey?5:1),onRemove:j=>c("str",j.shiftKey?-5:-1)}),e.jsx(V,{label:"Dexterity",value:b,bonus:l.dexterity,allocated:t.dex,color:"text-green-400",canAdd:u>0,onAdd:j=>c("dex",j.shiftKey?5:1),onRemove:j=>c("dex",j.shiftKey?-5:-1)}),e.jsx(V,{label:"Vitality",value:o,bonus:l.vitality,allocated:t.vit,color:"text-orange-400",canAdd:u>0,onAdd:j=>c("vit",j.shiftKey?5:1),onRemove:j=>c("vit",j.shiftKey?-5:-1)}),e.jsx(V,{label:"Energy",value:d,bonus:l.energy,allocated:t.nrg,color:"text-blue-400",canAdd:u>0,onAdd:j=>c("nrg",j.shiftKey?5:1),onRemove:j=>c("nrg",j.shiftKey?-5:-1)})]})]}),e.jsxs("div",{className:"glass-panel rounded-lg p-4",children:[e.jsx("h3",{className:"font-cinzel text-d2-gold mb-4",children:"Vitals"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Life"}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-red-400 font-bold",children:Math.floor(v)}),l.life>0&&e.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(+",l.life,")"]})]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Mana"}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-blue-400 font-bold",children:Math.floor(O)}),l.mana>0&&e.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(+",l.mana,")"]})]})]}),e.jsx(Pe,{label:"Defense",value:l.defense,bonus:0,color:"text-white",hideBase:!0}),(l.maek>0||l.laek>0||l.replenishLife>0)&&e.jsxs("div",{className:"pt-2 mt-2 border-t border-d2-border/30 space-y-2",children:[e.jsx(N,{label:"Life After Kill",value:l.laek,suffix:""}),e.jsx(N,{label:"Mana After Kill",value:l.maek,suffix:""}),e.jsx(N,{label:"Replenish Life",value:l.replenishLife,suffix:""})]})]})]}),e.jsxs("div",{className:"glass-panel rounded-lg p-4",children:[e.jsx("h3",{className:"font-cinzel text-d2-gold mb-4",children:"Resistances (Hell)"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsx(G,{label:"Fire Resist",value:q,max:75+l.maxFireRes}),e.jsx(G,{label:"Cold Resist",value:H,max:75+l.maxColdRes}),e.jsx(G,{label:"Light Resist",value:_,max:75+l.maxLightRes}),e.jsx(G,{label:"Poison Resist",value:$,max:75+l.maxPoisonRes}),(l.absorbFire>0||l.absorbCold>0||l.absorbLight>0||l.absorbMagic>0)&&e.jsxs("div",{className:"pt-2 mt-2 border-t border-d2-border/30 space-y-2",children:[e.jsx(N,{label:"Fire Absorb",value:l.absorbFire,suffix:""}),e.jsx(N,{label:"Cold Absorb",value:l.absorbCold,suffix:""}),e.jsx(N,{label:"Light Absorb",value:l.absorbLight,suffix:""}),e.jsx(N,{label:"Magic Absorb",value:l.absorbMagic,suffix:""})]})]})]}),e.jsxs("div",{className:"glass-panel rounded-lg p-4",children:[e.jsx("h3",{className:"font-cinzel text-d2-gold mb-4",children:"Combat"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsx(N,{label:"Crushing Blow",value:l.cb,suffix:"%"}),e.jsx(N,{label:"Deadly Strike",value:l.ds,suffix:"%"}),e.jsx(N,{label:"Open Wounds",value:l.ow,suffix:"%"}),e.jsx(N,{label:"Life Leech",value:l.ll,suffix:"%"}),e.jsx(N,{label:"Mana Leech",value:l.ml,suffix:"%"}),e.jsx("div",{className:"h-px bg-d2-border/30 my-2"}),e.jsx(U,{label:"Increased Attack Speed",value:l.ias,action:"Attack",charClass:a}),e.jsx(N,{label:"Faster Run/Walk",value:l.frw,suffix:"%"})]})]}),e.jsxs("div",{className:"glass-panel rounded-lg p-4",children:[e.jsx("h3",{className:"font-cinzel text-d2-gold mb-4",children:"Caster & Defense"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsx(U,{label:"Faster Cast Rate",value:l.fcr,action:"FCR",charClass:a}),e.jsx(U,{label:"Faster Hit Recovery",value:l.fhr,action:"FHR",charClass:a}),e.jsx("div",{className:"h-px bg-d2-border/30 my-2"}),e.jsx(N,{label:"Damage Reduced",value:l.dr,suffix:"%"}),e.jsx(N,{label:"Phys. Dmg Reduced",value:l.pdr,suffix:""}),e.jsx(N,{label:"Magic Dmg Reduced",value:l.mdr,suffix:""}),l.cbf&&e.jsxs("div",{className:"flex justify-between items-center text-blue-400 font-bold",children:[e.jsx("span",{children:"Cannot Be Frozen"}),e.jsx("span",{children:"Yes"})]})]})]}),e.jsxs("div",{className:"glass-panel rounded-lg p-4",children:[e.jsx("h3",{className:"font-cinzel text-d2-gold mb-4",children:"Utility"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsx(N,{label:"Magic Find",value:l.mf,suffix:"%"}),e.jsx(N,{label:"Gold Find",value:l.gf,suffix:"%"})]})]}),(Object.keys(l.treeSkills).length>0||Object.keys(l.classSkills).length>0||l.allSkills>0)&&e.jsxs("div",{className:"glass-panel rounded-lg p-4",children:[e.jsx("h3",{className:"font-cinzel text-d2-gold mb-4",children:"Skill Bonuses"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-300",children:[l.allSkills>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"All Skills"}),e.jsxs("span",{className:"text-d2-gold",children:["+",l.allSkills]})]}),Object.entries(l.classSkills).map(([j,f])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[j," Skills"]}),e.jsxs("span",{className:"text-d2-gold",children:["+",f]})]},j)),Object.entries(l.treeSkills).map(([j,f])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[j," Skills"]}),e.jsxs("span",{className:"text-d2-gold",children:["+",f]})]},j))]})]})]})}function V({label:a,value:s,bonus:r,allocated:l,color:t,canAdd:u,onAdd:c,onRemove:x}){return e.jsxs("div",{className:"flex justify-between text-sm items-center",children:[e.jsx("span",{className:"text-gray-400",children:a}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center bg-black/40 rounded border border-gray-700",children:[e.jsx("button",{onClick:x,disabled:l<=0,className:"px-1.5 hover:text-red-400 disabled:text-gray-700 disabled:cursor-not-allowed text-gray-400 transition-colors",children:"-"}),e.jsx("span",{className:"text-[10px] w-6 text-center text-gray-500 select-none",children:l}),e.jsx("button",{onClick:c,disabled:!u,className:"px-1.5 hover:text-green-400 disabled:text-gray-700 disabled:cursor-not-allowed text-gray-400 transition-colors",children:"+"})]}),e.jsxs("div",{className:"flex items-center gap-1 min-w-[3rem] justify-end",children:[e.jsx("span",{className:M("font-bold",t),children:s}),r>0&&e.jsxs("span",{className:"text-[10px] text-blue-400",children:["(+",r,")"]})]})]})]})}function Pe({label:a,value:s,bonus:r,color:l,hideBase:t}){return e.jsxs("div",{className:"flex justify-between text-sm items-center",children:[e.jsx("span",{className:"text-gray-400",children:a}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:M("font-bold",l),children:s}),!t&&r>0&&e.jsxs("span",{className:"text-xs text-blue-400",children:["(+",r,")"]})]})]})}function G({label:a,value:s,max:r=75}){const t=s>=r?"text-d2-gold":s>=0?"text-white":"text-red-400";return e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:a}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{className:M("font-bold",t),children:[Math.floor(s),"%"]}),e.jsxs("span",{className:"text-[10px] text-gray-600",children:["/ ",r,"%"]})]})]})}function N({label:a,value:s,suffix:r}){return!s&&s!==0||s===0?null:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:a}),e.jsxs("span",{className:"text-white font-bold",children:[s,r]})]})}function U({label:a,value:s,action:r,charClass:l}){if(r==="Attack")return e.jsx(N,{label:a,value:s,suffix:"%"});const t=ye.find(o=>o.className===l&&o.action===r&&!o.variant);if(!t)return e.jsx(N,{label:a,value:s,suffix:"%"});const u=s||0,c=Object.keys(t.frames).map(Number).sort((o,d)=>o-d),x=c.filter(o=>o<=u).pop()||0,m=t.frames[x],b=c.find(o=>o>u);return e.jsxs("div",{className:"flex justify-between items-center group relative cursor-help",children:[e.jsx("span",{className:"text-gray-400 border-b border-dotted border-gray-600",children:a}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"text-white font-bold",children:[u,"%"]}),e.jsxs("span",{className:"text-d2-gold text-xs ml-1",children:["(",m," fpa)"]})]}),e.jsxs("div",{className:"absolute bottom-full right-0 mb-2 w-48 bg-black border border-d2-gold p-2 rounded hidden group-hover:block z-50 shadow-xl pointer-events-none",children:[e.jsxs("div",{className:"text-xs text-center text-d2-gold font-bold mb-1",children:[r," Breakpoints"]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 border-b border-gray-800 pb-1 mb-1",children:[e.jsx("span",{children:"Value"}),e.jsx("span",{children:"Frames"})]}),c.map(o=>e.jsxs("div",{className:M("flex justify-between text-xs",u>=o?u<(c.find(d=>d>o)||999)?"text-green-400 font-bold":"text-white":"text-gray-500"),children:[e.jsxs("span",{children:[o,"%"]}),e.jsxs("span",{children:[t.frames[o]," fpa"]})]},o)),b&&e.jsxs("div",{className:"mt-2 text-[10px] text-gray-400 text-center",children:["Next BP at ",b,"%"]})]})]})}function Me({skill:a,level:s,canAllocate:r,onAdd:l,onRemove:t,onHover:u,onLeave:c}){const x=s>0;return e.jsx("div",{className:"relative",onMouseEnter:u,onMouseLeave:c,children:e.jsxs("div",{className:M("w-12 h-12 rounded border-2 flex items-center justify-center text-xl cursor-pointer transition-all relative",x?"border-d2-gold bg-d2-gold/20 shadow-[0_0_10px_rgba(199,179,119,0.3)]":r?"border-gray-600 bg-d2-dark hover:border-gray-500":"border-gray-800 bg-d2-dark/50 opacity-50"),onClick:()=>r&&l(),onContextMenu:m=>{m.preventDefault(),t()},children:[e.jsx("span",{className:M(!x&&!r&&"grayscale opacity-50"),children:a.icon||"âš¡"}),s>0&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-d2-gold text-black text-[10px] font-bold rounded-full flex items-center justify-center",children:s})]})})}function Be({treeName:a,skills:s,skillLevels:r,totalPoints:l,characterLevel:t,onAddPoint:u,onRemovePoint:c,onSkillHover:x}){const m=y.useCallback(o=>{if(t<o.reqLevel||l>=t+11)return!1;if(o.prereqs){for(const d of o.prereqs)if(!r[d]||r[d]<1)return!1}return!((r[o.id]||0)>=o.maxLevel)},[r,t,l]),b=Array(6).fill(null).map(()=>Array(3).fill(null));return s.forEach(o=>{o.tier>=1&&o.tier<=6&&o.position>=1&&o.position<=3&&(b[o.tier-1][o.position-1]=o)}),e.jsxs("div",{className:"glass-panel rounded-lg w-fit mx-auto",children:[e.jsx("div",{className:"p-3 border-b border-d2-border bg-black/40 rounded-t-lg",children:e.jsx("h3",{className:"font-cinzel text-sm text-d2-gold",children:a})}),e.jsx("div",{className:"p-2",children:e.jsx("div",{className:"space-y-3",children:b.map((o,d)=>e.jsx("div",{className:"flex justify-center gap-1",children:o.map((g,p)=>e.jsx("div",{className:"w-12 h-12 flex items-center justify-center",children:g?e.jsx(Me,{skill:g,level:r[g.id]||0,canAllocate:m(g),onAdd:()=>u(g.id),onRemove:()=>c(g.id),onHover:v=>x(g,r[g.id]||0,v.currentTarget.getBoundingClientRect()),onLeave:()=>x(g,0,null)}):e.jsx("div",{className:"w-12 h-12"})},p))},d))})})]})}function Fe({slot:a,charClass:s,onSelect:r,onClose:l}){const[t,u]=y.useState(""),[c,x]=y.useState("all"),m=ce(a),b=m.filter(d=>{const g=!t||d.name.toLowerCase().includes(t.toLowerCase()),p=c==="all"||c==="unique"&&d.category==="unique"||c==="set"&&d.category==="set"||c==="runeword"&&d.category==="runeword",v=d.category==="unique"||d.category==="set"||d.category==="runeword",L=!d.requiredClass||d.requiredClass===s;return g&&p&&v&&L}).sort((d,g)=>{const p={S:0,A:1,B:2,C:3},v=d.tier?p[d.tier]??4:4,L=g.tier?p[g.tier]??4:4;return v!==L?v-L:d.name.localeCompare(g.name)}),o=[{id:"all",label:"All",count:m.filter(d=>["unique","set","runeword"].includes(d.category)).length,color:"text-gray-200"},{id:"unique",label:"Unique",count:m.filter(d=>d.category==="unique").length,color:"text-d2-gold"},{id:"set",label:"Set",count:m.filter(d=>d.category==="set").length,color:"text-green-400"},{id:"runeword",label:"Runeword",count:m.filter(d=>d.category==="runeword").length,color:"text-orange-400"}];return e.jsxs("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-2",onClick:l,children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm"}),e.jsxs("div",{className:"relative glass-panel border-2 border-d2-gold/50 rounded-xl w-full max-w-lg max-h-[85vh] overflow-hidden shadow-2xl",onClick:d=>d.stopPropagation(),children:[e.jsxs("div",{className:"p-2 border-b border-d2-border bg-black/40 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-cinzel font-bold text-d2-gold",children:["Select ",a.replace(/[0-9]/g,"")]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[b.length," items available"]})]}),e.jsx("button",{onClick:l,className:"text-gray-400 hover:text-white p-1",children:e.jsx(W,{size:20})})]}),e.jsx("div",{className:"p-3 border-b border-d2-border",children:e.jsxs("div",{className:"relative",children:[e.jsx(je,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search items...",value:t,onChange:d=>u(d.target.value),className:"w-full pl-10 pr-4 py-2 bg-d2-dark border border-d2-border rounded-lg text-sm focus:border-d2-gold/50 outline-none"})]})}),e.jsx("div",{className:"flex border-b border-d2-border",children:o.map(d=>e.jsxs("button",{onClick:()=>x(d.id),className:M("flex-1 py-2 px-3 text-xs font-medium transition-colors",c===d.id?"bg-d2-gold/10 text-d2-gold border-b-2 border-d2-gold":"text-gray-400 hover:text-white hover:bg-white/5"),children:[e.jsx("span",{className:d.color,children:d.label}),e.jsxs("span",{className:"text-gray-600 ml-1",children:["(",d.count,")"]})]},d.id))}),e.jsxs("div",{className:"overflow-y-auto max-h-[50vh] p-2",children:[e.jsxs("button",{onClick:()=>{r(""),l()},className:"w-full p-2 text-left hover:bg-red-500/10 rounded-lg transition-colors border border-transparent hover:border-red-500/30 mb-2 flex items-center gap-2",children:[e.jsx(W,{size:14,className:"text-red-400"}),e.jsx("span",{className:"text-gray-400 text-sm",children:"Clear Slot"})]}),b.length===0?e.jsxs("div",{className:"text-center text-gray-500 py-8",children:[e.jsx(ve,{size:24,className:"mx-auto mb-2 opacity-50"}),"No items found for this slot"]}):b.map(d=>e.jsx("button",{onClick:()=>{r(d.id),l()},className:"w-full p-3 text-left hover:bg-d2-gold/10 rounded-lg transition-colors border border-transparent hover:border-d2-gold/30 mb-1",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl flex-shrink-0",children:d.icon||"ðŸ›¡ï¸"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:M("font-cinzel font-bold text-sm",d.category==="unique"&&"text-d2-gold",d.category==="set"&&"text-green-400",d.category==="runeword"&&"text-orange-400"),children:d.name}),d.tier&&e.jsxs("span",{className:M("text-[9px] px-1.5 py-0.5 rounded font-bold",d.tier==="S"&&"bg-purple-500/20 text-purple-400",d.tier==="A"&&"bg-blue-500/20 text-blue-400",d.tier==="B"&&"bg-green-500/20 text-green-400",d.tier==="C"&&"bg-gray-500/20 text-gray-400"),children:[d.tier,"-Tier"]})]}),e.jsxs("div",{className:"text-[10px] text-gray-500 flex items-center gap-2",children:[e.jsx("span",{children:d.baseType}),d.reqLevel&&e.jsxs("span",{children:["â€¢ Req Lvl ",d.reqLevel]})]}),e.jsx("div",{className:"mt-1 space-y-0.5",children:d.statLines?.slice(0,3).map((g,p)=>e.jsx("div",{className:"text-[10px] text-blue-400 truncate",children:g},p))})]})]})},d.id))]})]})]})}function T({slot:a,itemId:s,onSelect:r,onHover:l}){const t=s?J.find(c=>c.id===s):null,u={Helmet:"ðŸª–",Amulet:"ðŸ“¿",Armor:"ðŸ›¡ï¸",MainHand:"âš”ï¸",OffHand:"ðŸ›¡ï¸",Ring1:"ðŸ’",Ring2:"ðŸ’",Gloves:"ðŸ§¤",Belt:"ðŸŽ—ï¸",Boots:"ðŸ‘¢"};return e.jsxs("div",{className:"relative",onMouseEnter:c=>t&&l(t,c.currentTarget.getBoundingClientRect()),onMouseLeave:()=>l(null,null),children:[e.jsx("div",{onClick:r,className:M("w-14 h-14 border-2 rounded flex items-center justify-center cursor-pointer transition-all hover:scale-105",t?"border-d2-gold/50 bg-d2-gold/10 hover:border-d2-gold shadow-[0_0_10px_rgba(199,179,119,0.2)]":"border-d2-border bg-d2-dark/80 hover:border-d2-gold/30"),children:e.jsx("span",{className:M("text-2xl",t?"opacity-100":"opacity-40"),children:t?.icon||u[a]})}),e.jsx("div",{className:"text-[8px] text-gray-500 text-center mt-1",children:a.replace(/[0-9]/g,"")})]})}function Ve(){const[a]=re(),[s,r]=y.useState("Sorceress"),[l,t]=y.useState(99),[u,c]=y.useState({}),[x,m]=y.useState({}),[b,o]=y.useState({str:0,dex:0,vit:0,nrg:0}),[d,g]=y.useState(!1),[p,v]=y.useState(null);y.useEffect(()=>{const i=a.get("build");if(i){const n=Ne.find(h=>h.id===i);if(n){r(n.class);const h={};n.sections?.skills?.allocation&&n.sections.skills.allocation.forEach(k=>{const D=ae(k.name);if(D){const A=typeof k.level=="number"?k.level:1;h[D.id]=A}}),c(h),c(h);const S={};n.sections?.gearSets?.[0]?.slots&&Object.entries(n.sections.gearSets[0].slots).forEach(([k,D])=>{let A=null;if(k==="Helm"&&(A="Helmet"),k==="Amulet"&&(A="Amulet"),k==="Armor"&&(A="Armor"),(k==="Weapon"||k==="Weapon 1")&&(A="MainHand"),(k==="Shield"||k==="Weapon 2")&&(A="OffHand"),k==="Gloves"&&(A="Gloves"),k==="Belt"&&(A="Belt"),k==="Boots"&&(A="Boots"),k==="Ring 1"&&(A="Ring1"),k==="Ring 2"&&(A="Ring2"),A){const se=typeof D=="string"?D:D.name,X=oe(se);X&&(S[A]=X.id)}}),m(S),o({str:0,dex:0,vit:0,nrg:0})}}},[a]);const L=ie(s),F=Object.values(u).reduce((i,n)=>i+n,0),O=l+11-F,E=(l-1)*5,q=Object.values(b).reduce((i,n)=>i+n,0),H=Math.max(0,E-q),_=i=>{c(n=>({...n,[i]:Math.min((n[i]||0)+1,20)}))},$=i=>{c(n=>({...n,[i]:Math.max((n[i]||0)-1,0)}))},j=(i,n)=>{o(h=>{const S=h[i];return n>0&&H<n||n<0&&S<Math.abs(n)?h:{...h,[i]:S+n}})},f=()=>{c({}),o({str:0,dex:0,vit:0,nrg:0})},B=i=>{r(i),c({}),o({str:0,dex:0,vit:0,nrg:0}),g(!1)},I=(i,n)=>{m(h=>({...h,[i]:n||null}))},z=y.useCallback(i=>{r(i.charClass),t(i.level),c(i.skills),m(n=>({...n,...i.equipment})),i.attributes?o(i.attributes):o({str:0,dex:0,vit:0,nrg:0})},[]),P={Amazon:{str:20,dex:25,vit:20,nrg:15,life:50,mana:15},Assassin:{str:20,dex:20,vit:20,nrg:25,life:50,mana:25},Barbarian:{str:30,dex:20,vit:25,nrg:10,life:55,mana:10},Druid:{str:15,dex:20,vit:25,nrg:20,life:55,mana:20},Necromancer:{str:15,dex:25,vit:15,nrg:25,life:45,mana:25},Paladin:{str:25,dex:20,vit:25,nrg:15,life:55,mana:15},Sorceress:{str:10,dex:25,vit:10,nrg:35,life:40,mana:35}},w=y.useMemo(()=>{const i=Object.values(x).map(n=>J.find(h=>h.id===n)).filter(n=>!!n);return Ce(i)},[x]),[C,R]=y.useState(null),K=Object.values(x).filter(Boolean).length;return e.jsxs(e.Fragment,{children:[e.jsxs(le,{className:"space-y-6 max-w-6xl mx-auto px-2 sm:px-4",children:[e.jsx(te,{title:"Character Planner",description:"Plan your Diablo 2 Resurrected character build with skill trees, attributes, and equipment selector.",url:"/planner"}),e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-cinzel font-bold text-d2-gold",children:"Character Planner"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Plan your build with skill trees, attributes, and equipment"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:f,className:"flex items-center gap-2 px-4 py-2 bg-d2-dark border border-d2-border rounded hover:border-d2-gold/50 transition-colors text-sm",children:[e.jsx(he,{size:14})," Reset All"]}),e.jsx(ke,{charClass:s,level:l,skills:u,equipment:x,attributes:b,onLoad:z})]})]}),e.jsxs("div",{className:"glass-panel p-4 grid grid-cols-1 md:grid-cols-3 gap-6 items-center relative z-50",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>g(!d),className:"w-full flex items-center justify-between p-3 bg-d2-dark border border-d2-border rounded hover:border-d2-gold/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:Y.find(i=>i.id===s)?.icon}),e.jsx("span",{className:"font-cinzel font-bold text-white",children:s})]}),e.jsx(ge,{size:18,className:"text-gray-400"})]}),d&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-d2-dark border border-d2-border rounded-lg overflow-hidden z-20 shadow-xl",children:Y.map(i=>e.jsxs("button",{onClick:()=>B(i.id),className:M("w-full flex items-center gap-3 p-3 hover:bg-d2-gold/10 transition-colors text-left",i.id===s&&"bg-d2-gold/10"),children:[e.jsx("span",{className:"text-xl",children:i.icon}),e.jsx("span",{className:M("font-cinzel",i.color),children:i.id})]},i.id))})]}),e.jsxs("div",{className:"flex items-center justify-center gap-4 bg-d2-dark/50 p-2 rounded border border-d2-border/50",children:[e.jsx("span",{className:"text-gray-400 text-sm font-cinzel",children:"Character Level"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>t(Math.max(1,l-1)),className:"w-8 h-8 bg-d2-dark border border-d2-border rounded flex items-center justify-center hover:border-d2-gold/50 text-d2-gold",children:e.jsx(be,{size:14})}),e.jsx("input",{type:"number",value:l,onChange:i=>t(Math.min(99,Math.max(1,parseInt(i.target.value)||1))),className:"w-16 text-center bg-transparent border-none text-xl text-d2-gold font-bold focus:ring-0"}),e.jsx("button",{onClick:()=>t(Math.min(99,l+1)),className:"w-8 h-8 bg-d2-dark border border-d2-border rounded flex items-center justify-center hover:border-d2-gold/50 text-d2-gold",children:e.jsx(pe,{size:14})})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Skill Points"}),e.jsxs("span",{className:"text-d2-gold font-bold",children:[F," / ",l+11]})]}),e.jsx("div",{className:"h-2 bg-d2-dark rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-d2-gold transition-all",style:{width:`${Math.min(100,F/(l+11)*100)}%`}})}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1 text-right",children:[O," points available"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-[1fr_320px] gap-6 items-start",children:[e.jsxs("div",{className:"space-y-6 min-w-0",children:[e.jsx("div",{className:"flex flex-wrap justify-center xl:justify-start gap-4",children:L.map(i=>e.jsx(Be,{treeName:i.name,skills:i.skills,skillLevels:u,totalPoints:F,characterLevel:l,onAddPoint:_,onRemovePoint:$,onSkillHover:(n,h,S)=>R(S?{type:"skill",skill:n,level:h,anchor:S}:null)},i.name))}),e.jsxs("div",{className:"glass-panel p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-d2-border pb-2",children:[e.jsx("h3",{className:"font-cinzel text-lg text-d2-gold",children:"Equipment"}),e.jsxs("span",{className:"text-xs text-gray-500",children:[K,"/10 slots"]})]}),e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 justify-items-center",children:[e.jsx("div",{}),e.jsx(T,{slot:"Helmet",itemId:x.Helmet||null,onSelect:()=>v("Helmet"),onHover:(i,n)=>R(i&&n?{type:"item",item:i,anchor:n}:null)}),e.jsx("div",{}),e.jsx(T,{slot:"Amulet",itemId:x.Amulet||null,onSelect:()=>v("Amulet"),onHover:(i,n)=>R(i&&n?{type:"item",item:i,anchor:n}:null)}),e.jsx(T,{slot:"Armor",itemId:x.Armor||null,onSelect:()=>v("Armor"),onHover:(i,n)=>R(i&&n?{type:"item",item:i,anchor:n}:null)}),e.jsx("div",{}),e.jsx(T,{slot:"MainHand",itemId:x.MainHand||null,onSelect:()=>v("MainHand"),onHover:(i,n)=>R(i&&n?{type:"item",item:i,anchor:n}:null)}),e.jsx(T,{slot:"Belt",itemId:x.Belt||null,onSelect:()=>v("Belt"),onHover:(i,n)=>R(i&&n?{type:"item",item:i,anchor:n}:null)}),e.jsx(T,{slot:"OffHand",itemId:x.OffHand||null,onSelect:()=>v("OffHand"),onHover:(i,n)=>R(i&&n?{type:"item",item:i,anchor:n}:null)}),e.jsx(T,{slot:"Gloves",itemId:x.Gloves||null,onSelect:()=>v("Gloves"),onHover:(i,n)=>R(i&&n?{type:"item",item:i,anchor:n}:null)}),e.jsx(T,{slot:"Boots",itemId:x.Boots||null,onSelect:()=>v("Boots"),onHover:(i,n)=>R(i&&n?{type:"item",item:i,anchor:n}:null)}),e.jsx("div",{}),e.jsx(T,{slot:"Ring1",itemId:x.Ring1||null,onSelect:()=>v("Ring1"),onHover:(i,n)=>R(i&&n?{type:"item",item:i,anchor:n}:null)}),e.jsx("div",{}),e.jsx(T,{slot:"Ring2",itemId:x.Ring2||null,onSelect:()=>v("Ring2"),onHover:(i,n)=>R(i&&n?{type:"item",item:i,anchor:n}:null)})]}),e.jsx("p",{className:"text-xs text-gray-600 text-center mt-6",children:"Click slots to equip items"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(Le,{charClass:s,level:l,baseStats:P[s],itemStats:w,allocatedStats:b,availablePoints:H,onAllocate:j}),e.jsxs("div",{className:"glass-panel p-4",children:[e.jsx("h3",{className:"font-cinzel text-d2-gold mb-4 border-b border-d2-border pb-2",children:"Active Skills Summary"}),e.jsx("div",{className:"space-y-2",children:Object.entries(u).filter(([,i])=>i>0).map(([i,n])=>{const h=ne(i);if(!h)return null;const S=w.allSkills+(w.classSkills[s]||0),k=n+S;return e.jsxs("div",{className:"flex justify-between text-sm py-1 border-b border-white/5",children:[e.jsxs("span",{className:"text-gray-300 flex items-center gap-2",children:[e.jsx("span",{children:h.icon})," ",h.name]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-d2-gold font-bold",children:k}),S>0&&e.jsxs("span",{className:"text-blue-400 opacity-80 text-xs",children:["(",n,"+",S,")"]})]})]},i)})}),Object.keys(u).filter(i=>u[i]>0).length===0&&e.jsx("div",{className:"text-sm text-gray-500 text-center py-4",children:"No skills allocated"})]})]})]})]}),p&&e.jsx(Fe,{slot:p,charClass:s,onSelect:i=>I(p,i),onClose:()=>v(null)}),C&&e.jsx("div",{className:"fixed z-[9999] pointer-events-none",style:{left:`${C.anchor.right+10}px`,top:`${C.anchor.top}px`,transform:C.anchor.right+300>window.innerWidth?`translateX(calc(-100% - ${C.anchor.width+20}px))`:"none"},children:e.jsx("div",{className:"bg-black border-2 border-d2-gold/70 rounded-lg p-4 shadow-[0_0_30px_rgba(0,0,0,0.8)] w-72",children:C.type==="skill"?e.jsx(de,{skill:C.skill,level:C.level,showNextLevel:!0}):e.jsxs("div",{children:[e.jsx("h4",{className:"font-cinzel font-bold text-d2-gold text-sm",children:C.item.name}),e.jsx("div",{className:"text-xs text-gray-400 mb-2",children:C.item.baseType}),C.item.statLines?.slice(0,10).map((i,n)=>e.jsx("div",{className:"text-xs text-blue-400 leading-tight",children:i},n))]})})})]})}export{Ve as PlannerPage};
